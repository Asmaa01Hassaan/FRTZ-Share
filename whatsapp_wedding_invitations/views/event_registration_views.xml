<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Event Registration Form View - Add Badge Image -->
    <record id="view_event_registration_form_inherit_badge_image" model="ir.ui.view">
        <field name="name">event.registration.form.inherit.badge.image</field>
        <field name="model">event.registration</field>
        <field name="inherit_id" ref="event.view_event_registration_form"/>
        <field name="arch" type="xml">
            <!-- Add badge image field and button in header -->
            <xpath expr="//header" position="inside">
                <button name="action_generate_badge_image"
                        type="object"
                        string="Generate Badge Image"
                        class="btn-secondary"
                        icon="fa-image"
                        invisible="state not in ('open', 'done')"/>
            </xpath>
            
            <!-- Add badge image field in form -->
            <xpath expr="//notebook" position="inside">
                <page string="1">
                      <group string="Badge Image" name="badge_image_group">
                    <field name="badge_image" widget="image"
                           options="{'size': [300, 300]}"
                           class="oe_avatar"/>
                    <field name="badge_image_filename" invisible="1"/>
<!--                    <div class="alert alert-info" role="alert">-->
<!--                        <strong>Badge Image:</strong> This image is automatically generated from the badge PDF.-->
<!--                        Click "Generate Badge Image" to regenerate it manually.-->
<!--                    </div>-->
                </group>

                <!-- Add Barcode and QR Code -->
                <group string="Barcode &amp; QR Code" name="barcode_qr_group">
                    <group>
                        <field name="barcode" readonly="1"/>
                        <field name="barcode_image" widget="image"
                               options="{'size': [400, 150]}"
                               readonly="1"/>
                        <div class="alert alert-info" role="alert">
                            <strong>Barcode:</strong> Scan this barcode for check-in.
                        </div>
                    </group>
                    <group>
                        <field name="barcode_qr_image" widget="image"
                               options="{'size': [200, 200]}"
                               readonly="1"/>
                        <div class="alert alert-info" role="alert">
                            <strong>QR Code:</strong> Scan this QR code for quick check-in.
                        </div>
                    </group>
                </group>
                </page>

            </xpath>
        </field>
    </record>
    
    <!-- Event Registration Tree View - Add Badge Image Column -->
    <record id="view_event_registration_tree_inherit_badge_image" model="ir.ui.view">
        <field name="name">event.registration.tree.inherit.badge.image</field>
        <field name="model">event.registration</field>
        <field name="inherit_id" ref="event.view_event_registration_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="badge_image" widget="image" 
                       class="oe_avatar"
                       options="{'size': [50, 50]}"/>
            </xpath>
        </field>
    </record>
</odoo>


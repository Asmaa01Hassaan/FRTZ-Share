<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- WhatsApp Confirmation Wizard Form View -->
    <record id="view_whatsapp_confirmation_wizard_form" model="ir.ui.view">
        <field name="name">whatsapp.confirmation.wizard.form</field>
        <field name="model">whatsapp.confirmation.wizard</field>
        <field name="arch" type="xml">
            <form string="Send RSVP Confirmation Requests">
                <sheet>
                    <group>
                        <group>
                            <field name="event_id" readonly="1"/>
                            <field name="confirmation_method" widget="radio"/>
                        </group>
                        <group>
                            <field name="include_links" invisible="confirmation_method == 'attachments'"/>
                            <field name="include_text_response"/>
                        </group>
                    </group>
                    
                    <group string="ğŸ“ Attachments" invisible="confirmation_method not in ('attachments', 'attachments_message', 'attachments_links')">
                        <field name="include_attachments" invisible="1"/>
                        <field name="attachment_ids" widget="many2many_binary" nolabel="1"/>
                        <div class="alert alert-info" role="alert" invisible="confirmation_method == 'attachments_message'">
                            <strong>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©:</strong><br/>
                            â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ± Ø§Ù„Ø¯Ø¹ÙˆØ© Ø£Ùˆ Ù…Ù„ÙØ§Øª PDF (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 10 MB Ù„ÙƒÙ„ Ù…Ù„Ù)<br/>
                            â€¢ âœ… <strong>Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Message Template ÙƒÙ€ caption Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</strong>
                        </div>
                        <div class="alert alert-warning" role="alert" invisible="confirmation_method != 'attachments_message'">
                            <strong>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©:</strong><br/>
                            â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ± Ø§Ù„Ø¯Ø¹ÙˆØ© Ø£Ùˆ Ù…Ù„ÙØ§Øª PDF (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 10 MB Ù„ÙƒÙ„ Ù…Ù„Ù)<br/>
                            â€¢ âš ï¸ <strong>Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© Ù…Ù†ÙØµÙ„Ø©</strong>
                        </div>
                    </group>
                    
                    <group string="Select Guests">
                        <field name="guest_ids" widget="many2many_tags" 
                               options="{'color_field': 'rsvp_status'}"
                               nolabel="1"/>
                        <div class="alert alert-info" role="alert">
                            <i class="fa fa-info-circle"/> Only guests with pending RSVP status who haven't received a confirmation request will be pre-selected.
                        </div>
                    </group>
                    
                    <group string="Message Template">
                        <field name="message_template" nolabel="1" widget="text"/>
                        <div class="alert alert-secondary" role="alert">
                            <strong>Available Placeholders:</strong><br/>
                            <code>{name}</code> - Guest name<br/>
                            <code>{event_name}</code> - Event name<br/>
                            <code>{event_date}</code> - Event date and time<br/>
                            <code>{confirm_url}</code> - Confirmation link<br/>
                            <code>{decline_url}</code> - Decline link
                        </div>
                    </group>
                    
                    <group invisible="not send_progress">
                        <field name="send_progress" readonly="1" nolabel="1"/>
                    </group>
                </sheet>
                <footer>
                    <button string="ğŸ“© Send Confirmation Requests" name="action_send_confirmations" 
                            type="object" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- Action to open the wizard -->
    <record id="action_whatsapp_confirmation_wizard" model="ir.actions.act_window">
        <field name="name">Send RSVP Requests</field>
        <field name="res_model">whatsapp.confirmation.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'default_event_id': active_id}</field>
    </record>
</odoo>


<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Record Rule for CRM Leads (Opportunities) -->
        <record id="crm_lead_delegation_rule" model="ir.rule">
            <field name="name">CRM Lead: See own or delegated opportunities</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="domain_force">['|', ('user_id', '=', user.id), ('delegated_user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="perm_read">True</field>
            <field name="perm_write">True</field>
            <field name="perm_create">True</field>
            <field name="perm_unlink">False</field>
        </record>
        
        <!-- Record Rule for Project Tasks -->
        <record id="project_task_delegation_rule" model="ir.rule">
            <field name="name">Project Task: See own or delegated tasks</field>
            <field name="model_id" ref="project.model_project_task"/>
            <field name="domain_force">['|', ('user_ids', 'in', [user.id]), ('delegated_user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('project.group_project_user'))]"/>
            <field name="perm_read">True</field>
            <field name="perm_write">True</field>
            <field name="perm_create">True</field>
            <field name="perm_unlink">False</field>
        </record>
        
        <!-- Record Rule for Mail Activities -->
        <record id="mail_activity_delegation_rule" model="ir.rule">
            <field name="name">Mail Activity: See own or delegated activities</field>
            <field name="model_id" ref="mail.model_mail_activity"/>
            <field name="domain_force">['|', ('user_id', '=', user.id), ('delegated_user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="perm_read">True</field>
            <field name="perm_write">True</field>
            <field name="perm_create">True</field>
            <field name="perm_unlink">True</field>
        </record>
        
    </data>
</odoo>


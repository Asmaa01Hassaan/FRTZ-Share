<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_project_form_rtl" model="ir.ui.view">
        <field name="name">project.project.form.rtl</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <!-- Make the form RTL -->
            <xpath expr="//sheet" position="attributes">
                <attribute name="style">direction: rtl;</attribute>
            </xpath>
            <!--            <xpath expr="//sheet" position="before">-->
            <!--                <div class="oe_button_box" name="button_box">-->
            <!--                    <button name="action_debug_fields" type="object"-->
            <!--                            string="Debug Fields" class="btn-warning"/>-->
            <!--                </div>-->
            <!--            </xpath>-->

            <xpath expr="//div[hasclass('oe_title')]" position="replace">
                <div class="oe_title">
                    <h1 class="d-flex flex-row">
                        <field name="is_favorite" nolabel="1" widget="project_is_favorite" class="me-2"
                               options="{'autosave': False}"/>
                        <lable for="name">ูุดุฑูุน</lable>
                        <field name="name" options="{'line_breaks': False}" widget="text" class="o_text_overflow"
                               placeholder="e.g. Office Party"/>
                    </h1>
                </div>

            </xpath>

            <xpath expr="//group[.//field[@name='partner_id']]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//div[hasclass('oe_title')]" position="after">
                <div style="display: none;">
                    <field name="allow_timesheets"/>
                    <field name="project_age_days"/>
                    <field name="has_contract"/>
                    <field name="has_warning"/>
                    <field name="contract_status_color"/>
                    <field name="days_remaining"/>
                    <field name="is_overdue"/>
                </div>

                <!-- ุฅุญุตุงุฆูุงุช ุงููุดุฑูุน - ูุตุบุฑุฉ -->
                <div class="project_statistics_container"
                     style="background: #f8f9fa; border-radius: 8px; padding: 12px; margin-bottom: 20px; border: 1px solid #dee2e6;">
                    <div class="project_statistics_grid"
                         style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">

                        <!-- ุนูุฑ ุงููุดุฑูุน -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #667eea;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 4px;">๐ ุนูุฑ ุงููุดุฑูุน</div>
                            <div style="font-size: 22px; color: #2c3e50; font-weight: 600;">
                                <field name="project_age_days" readonly="1"/>
                            </div>
                            <div style="font-size: 10px; color: #6c757d;">ููู</div>
                        </div>

                        <!-- ุงูุฃูุงู ุงููุชุจููุฉ -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #11998e;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 4px;">โฑ๏ธ ุงูุฃูุงู ุงููุชุจููุฉ</div>
                            <div style="font-size: 22px; font-weight: 600;">
                                <field name="days_remaining" readonly="1"
                                       decoration-danger="is_overdue == True"
                                       decoration-warning="days_remaining &lt; 7 and days_remaining &gt; 0"
                                       decoration-success="days_remaining &gt;= 7"/>
                            </div>
                            <div style="font-size: 10px; color: #6c757d;">ููู</div>
                        </div>

                        <!-- ุญุงูุฉ ุงูุนูุฏ -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #38ef7d;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 4px;">๐ ุญุงูุฉ ุงูุนูุฏ</div>
                            <div style="font-size: 14px; font-weight: 600; margin: 5px 0;">
                                <field name="project_status_message" readonly="1"
                                       decoration-success="has_contract == True"
                                       decoration-danger="has_contract == False"/>
                            </div>
                        </div>

                        <!-- ุงูุชุญุฐูุฑุงุช -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #ff6b6b;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 4px;">โ๏ธ ุงูุชุญุฐูุฑุงุช</div>
                            <div style="font-size: 14px; font-weight: 600; margin: 5px 0;">
                                <field name="has_warning" readonly="1"
                                       decoration-danger="has_warning == True"
                                       decoration-success="has_warning == False"
                                       widget="boolean"/>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- ูุนูููุงุช ุงููุดุฑูุน -->
                <div style="margin-bottom: 30px;">
                    <div style="font-size: 18px; font-weight: 700; color: #2c3e50; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #667eea;">
                        ๐ ูุนูููุงุช ุงููุดุฑูุน
                    </div>

                    <!-- Grid Layout: 3 columns on desktop, responsive -->
                    <div class="project_info_grid"
                         style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">

                        <!-- ุงูุนููู -->
                        <div class="field_partner"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #667eea; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐ค
                                ุงูุนููู
                            </div>
                            <field name="partner_id"
                                   style="font-size: 15px; font-weight: 500; color: #2c3e50;"/>
                        </div>

                        <!-- ูุฏูุฑ ุงููุดุฑูุน -->
                        <div class="field_manager"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #764ba2; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐จโ๐ผ ูุฏูุฑ
                                ุงููุดุฑูุน
                            </div>
                            <field name="user_id"
                                   style="font-size: 15px; font-weight: 500; color: #2c3e50;"/>
                        </div>

                        <!-- ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ -->
                        <div class="field_dates"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #11998e; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐ ุชุงุฑูุฎ
                                ุจุฏุงูุฉ ูููุงูุฉ ุงููุดุฑูุน
                            </div>
                            <field name="date_start" string="Planned Date" widget="daterange"
                                   options="{&quot;end_date_field&quot;: &quot;date&quot;, &quot;always_range&quot;: &quot;1&quot;}"
                                   style="font-size: 15px; font-weight: 500; color: #2c3e50;"
                                   required="date_start or date"/>
                        </div>

                        <!-- ุฑูุฒ ุงููุดุฑูุน -->
                        <div class="field_code"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #f45c43; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐ ุฑูุฒ
                                ุงููุดุฑูุน
                            </div>
                            <field name="label_tasks"
                                   style="font-size: 15px; font-weight: 500; color: #2c3e50;"
                                   placeholder="#PRJ-2031"/>
                        </div>

                        <!-- Tags -->
                        <div class="field_tags"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #38ef7d; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐ท๏ธ
                                ุงููุณูู
                            </div>
                            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                        </div>

                        <!-- CRM Lead -->
                        <div class="field_crm"
                             style="background: #f8f9fa; border-radius: 10px; padding: 18px; border-left: 4px solid #eb3349; transition: all 0.3s;">
                            <div style="font-size: 13px; color: #6c757d; margin-bottom: 8px; font-weight: 600;">๐ผ ุงููุฑุตุฉ
                                ุงููุฑุชุจุทุฉ
                            </div>
                            <field name="crm_lead_ids" widget="many2many_tags" options="{'color_field': 'color'}"
                                   readonly="1"/>
                        </div>

                    </div>

                    <field name="active" invisible="1"/>
                </div>

                <!-- ๐ฐ ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ - ูุตุบุฑุฉ -->
                <div style="margin-bottom: 20px;" groups="crm_task_link.group_project_financial_statistics">
                    <div style="font-size: 14px; font-weight: 600; color: #2c3e50; margin-bottom: 12px; padding-bottom: 6px; border-bottom: 2px solid #dee2e6;">
                        ๐ฐ ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">

                        <!-- Total Budget -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #667eea; border: 1px solid #e9ecef;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 6px;">๐ต ุงูููุฒุงููุฉ ุงููููุฉ</div>
                            <field name="quick_total_budget" widget="monetary" readonly="1"
                                   style="font-size: 16px; font-weight: 600; color: #2c3e50;"/>
                        </div>

                        <!-- Total Spent -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #f45c43; border: 1px solid #e9ecef;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 6px;">๐ธ ุงููุตุฑูู ุงูููู</div>
                            <field name="quick_total_spent" widget="monetary" readonly="1"
                                   style="font-size: 16px; font-weight: 600; color: #2c3e50;"/>
                        </div>

                        <!-- Remaining Amount -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #11998e; border: 1px solid #e9ecef;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 6px;">๐ฐ ุงููุชุจูู</div>
                            <field name="quick_remaining" widget="monetary" readonly="1"
                                   style="font-size: 16px; font-weight: 600; color: #2c3e50;"/>
                        </div>

                        <!-- Utilization % -->
                        <div style="background: #fff; border-radius: 6px; padding: 12px; text-align: center; border-left: 3px solid #fa709a; border: 1px solid #e9ecef;">
                            <div style="font-size: 11px; color: #6c757d; margin-bottom: 6px;">๐ ูุณุจุฉ ุงูุงุณุชุฎุฏุงู</div>
                            <field name="quick_utilization" widget="monetary" readonly="1"
                                   style="font-size: 16px; font-weight: 600; color: #2c3e50;"/>
                        </div>

                    </div>
                </div>

            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="ุงูููุงู">
                    <field name="task_ids">
                        <!--                                <list editable="bottom" options="{'footer': 'total'}"></list>-->
                    </field>
                </page>

            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="๐ ุงูุฌุฏูู ุงูุฒููู (Timeline)">
                    <field name="timeline_html" readonly="1" widget="html"/>
                </page>
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="ุงููููุงุช">
                    <group>
                        <field name="exporter_document_line_ids">
                            <list editable="bottom">
                                <field name="name"/>
                                <field name="description"/>
                                <field name="attachment_ids" widget="many2many_binary" string="ุงููููุงุช"/>
                                <field name="required" string="ูุทููุจ"/>
                                <field name="passed" string="ูุฑุงุฑ ุงููุฏูุฑ"/>
                                <field name="user_id" readonly="1"/>

                            </list>
                        </field>
                    </group>
                </page>
            </xpath>

            <xpath expr="//notebook" position="inside">
                <!--                <page string="ุงููุตุงุฑูู ุงูุชุดุบูููุฉ">-->
                <!--                    <group>-->
                <!--                        <field name="operational_expense_ids">-->
                <!--                            <list editable="bottom" options="{'footer': 'total'}">-->
                <!--                                <field name="category_id" string="ุงููุฆุฉ"/>-->
                <!--                                <field name="description" string="ุงููุตู"/>-->
                <!--                                <field name="date" string="ุงูุชุงุฑูุฎ"/>-->
                <!--                                <field name="amount" string="ุงููุจูุบ"/>-->
                <!--                            </list>-->
                <!--                        </field>-->

                <!--                    </group>-->
                <!--                    <div style="text-align: end; font-weight: bold;">-->
                <!--                        ุงูุฅุฌูุงูู:-->
                <!--                        <field name="operational_expense_total"/>-->
                <!--                    </div>-->


                <!--                </page>-->
                <page string="ุงููุตุงุฑูู ุงูุชุดุบูููุฉ" style="direction: ltr;">
                    <group>
                        <field name="expense_ids" 
                               context="{'show_sum': True, 'default_project_id': id, 'default_analytic_distribution': default_expense_analytic_distribution, 'active_model': 'project.project', 'active_id': id, 'active_ids': [id]}">
                            <list editable="bottom">
                                <field name="name" string="ุงููุตู"/>
                                <field name="product_id" string="ุงููุฆุฉ" domain="[('can_be_expensed', '=', True)]"/>
                                <field name="total_amount" string="ุงููุจูุบ" sum="Total"/>
                                <field name="currency_id"/>
                                <field name="date" string="ุชุงุฑูุฎ ุงูุตุฑู"/>
                                <field name="analytic_distribution" string="ุงููุดุฑูุน" widget="analytic_distribution" 
                                       options="{'product_field': 'product_id', 'account_field': 'account_id', 'business_domain': 'expense'}"/>
                                <field name="state" string="ุงูุญุงูุฉ"/>
                            </list>
                        </field>
                    </group>
                    <group>
                        <field name="project_expense_total" readonly="1" widget="monetary"
                               options="{'currency_field': 'company_currency'}"/>
                    </group>
                </page>
                <page string="ููุซุงู ุงููุดุฑูุน" >
                    <group>
                        <group>
                            <field name="project_charter_sequence" readonly="1" string="ุฑูู ุงูููุซุงู"/>
                        </group>
                        <group>
                            <div class="alert alert-info" role="alert" invisible="project_charter_url">
                                <strong>ููุงุญุธุฉ:</strong> ุณูุชู ุฅูุดุงุก ุฑูู ุงูููุซุงู ุชููุงุฆูุงู ุนูุฏ ุนุฑุถ ุงูุชูุฑูุฑ.
                            </div>
                            <div class="alert alert-success" role="alert" invisible="not project_charter_url">
                                <strong>ุฑุงุจุท ููุซุงู ุงููุดุฑูุน:</strong>
                                <br/>
                                <field name="project_charter_url" readonly="1" widget="url" nolabel="1" 
                                       options="{'is_button': False}"/>
                            </div>
                        </group>
                    </group>
                    <group>
                        <field name="project_objective" options="{'resizable': false}" string="ุฃูุฏุงู ุงููุดุฑูุน / Project Objective"
                               placeholder="ุฃุฏุฎู ุฃูุฏุงู ุงููุดุฑูุน / Enter project objectives" style="direction: rtl;"/>
                    </group>
                    <group>
                        <field name="project_scope" options="{'resizable': false}" string="ูุทุงู ุงููุดุฑูุน / Project Scope"
                               placeholder="ุฃุฏุฎู ูุทุงู ุงููุดุฑูุน / Enter project scope" style="direction: rtl;"/>
                    </group>
                    <div style="margin-top: 20px;">
                        <button name="action_view_project_charter"
                                type="object"
                                string="ุนุฑุถ/ุชุญููู ููุซุงู ุงููุดุฑูุน (PDF)"
                                class="btn-primary"
                                icon="fa-file-pdf-o"/>
                    </div>
                </page>
            </xpath>


        </field>
    </record>

    <record id="view_project_form_inherit_vendor_bills" model="ir.ui.view">
        <field name="name">project.project.form.vendor.bills</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <xpath expr="//div[contains(@class, 'oe_button_box')]" position="inside">
                <button name="action_view_vendor_bills"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-file-text-o"
                        style="padding: 6px 12px; margin: 2px;">
                    <div class="o_stat_info">
                        <field name="vendor_bill_count" widget="statinfo"/>
                        <!--                         <span class="o_stat_text">ููุงุชูุฑ ุงูููุฑุฏูู</span>-->
                    </div>
                </button>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]" position="inside">

                <button name="action_view_customer_invoices"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-file-text"
                        style="padding: 6px 12px; margin: 2px;">
                    <div class="o_stat_info">
                        <!--                        <span class="o_stat_text">ููุงุชูุฑ ุงูุนููุงุก</span>-->
                        <field name="customer_invoice_count" widget="statinfo"/>
                    </div>
                </button>
                <button name="action_view_expense"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-money"
                        style="padding: 6px 12px; margin: 2px;">

                    <div class="o_stat_info">
                        <div class="o_stat_text">ุงููุตุฑููุงุช</div>

                        <span class="o_stat_text">
                            <field name="project_expense_total" widget="monetary"
                                   options="{'currency_field': 'company_currency'}"/>
                        </span>
                    </div>

                </button>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]" position="inside">
                <button name="action_view_purchase_orders"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-money"
                        style="padding: 6px 12px; margin: 2px;">

                    <div class="o_stat_info">
                        <!--                        <div class="o_stat_text">ุทูุจุงุช ุงูุดุฑุงุก</div>-->

                        <span class="o_stat_text">
                            <field name="purchase_order_count" widget="statinfo"/>
                        </span>
                    </div>

                </button>

            </xpath>
        </field>
    </record>

    <record id="view_move_form_project" model="ir.ui.view">
        <field name="name">account.move.form.project</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="project_id"/>
            </xpath>
        </field>
    </record>


    <record id="project.open_view_project_all_group_stage" model="ir.actions.act_window">
        <field name="view_mode">list,kanban,form,gantt,calendar,activity</field>
    </record>


</odoo>
    